<Window x:Class="MediaCloudDesktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MediaCloudDesktop"
        mc:Ignorable="d"
        Title="AHSFNU 媒体云平台" Height="800" Width="1200" 
        WindowStartupLocation="CenterScreen">
    
    <Grid>
        <!-- 登录界面 -->
        <Grid x:Name="LoginGrid" Background="#F5F7FA">
            <Border x:Name="AuthBorder" Background="White" 
                    CornerRadius="8" 
                    Width="460" 
                    MinHeight="500"
                    MaxHeight="680"
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" 
                                    Direction="270" 
                                    ShadowDepth="5" 
                                    BlurRadius="10" 
                                    Opacity="0.3"/>
                </Border.Effect>
                <Grid Margin="28" VerticalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- 固定品牌区 -->
                    <StackPanel x:Name="BrandPanel" Grid.Row="0" Margin="0,0,0,10">
                        <TextBlock Text="AHSFNU 媒体云平台"
                                FontSize="26" 
                                FontWeight="Bold"
                                HorizontalAlignment="Center"
                                Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBlock Text="登录或注册以继续"
                                FontSize="12" 
                                Margin="0,6,0,0" 
                                HorizontalAlignment="Center"
                                Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>


                    <!-- 可切换内容区：登录/注册 -->
                    <ContentControl x:Name="AuthContent" Grid.Row="1">
                        <StackPanel x:Name="LoginPanel">
                            <TextBlock Text="用户名/邮箱"
                                       FontSize="14"
                                       Margin="0,0,0,8"
                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBox x:Name="UsernameTextBox" Style="{StaticResource CompactTextBox}" Margin="0,0,0,10"/>

                            <TextBlock Text="密码"
                                       FontSize="14"
                                       Margin="0,0,0,8"
                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                            <PasswordBox x:Name="PasswordBox" Style="{StaticResource CompactPasswordBox}" Margin="0,0,0,10"/>

                            <TextBlock Text="验证码"
                                       FontSize="14"
                                       Margin="0,0,0,8"
                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="CaptchaTextBox" Style="{StaticResource CompactTextBox}" Grid.Column="0" Margin="0,0,8,0"/>
                                <Image x:Name="CaptchaImage" Grid.Column="1" Stretch="Uniform" MouseLeftButtonDown="CaptchaImage_MouseLeftButtonDown" Cursor="Hand"/>
                            </Grid>

                            <Button x:Name="LoginButton" Content="登录" Style="{StaticResource CompactButton}" Click="LoginButton_Click" Margin="0,0,0,8"/>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="没有账户？" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,6,0"/>
                                <Button x:Name="RegisterButton" Content="注册新账户" Style="{StaticResource LinkButton}" Click="RegisterButton_Click"/>
                            </StackPanel>

                            <TextBlock x:Name="StatusTextBlock" Text="" Foreground="Red" HorizontalAlignment="Center" Margin="0,10,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </ContentControl>
                </Grid>
            </Border>
        </Grid>

        <!-- 主界面 -->
        <Grid x:Name="MainGrid" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 顶部导航栏 -->
            <Border Background="White" 
                    BorderBrush="#E4E7ED" 
                    BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="AHSFNU 媒体云平台" 
                             FontSize="18" 
                             FontWeight="Bold" 
                             VerticalAlignment="Center" 
                             Margin="20,0,0,0"
                              Foreground="{StaticResource TextPrimaryBrush}"/>

                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              HorizontalAlignment="Right" 
                              VerticalAlignment="Center" 
                              Margin="0,0,20,0">
                        <TextBlock x:Name="UserInfoTextBlock" 
                                 Text="欢迎，用户" 
                                 VerticalAlignment="Center" 
                                 Margin="0,0,15,0"
                                  Foreground="{StaticResource TextSecondaryBrush}"/>
                        <ToggleButton x:Name="ThemeToggle" Content="深色模式" Style="{StaticResource ModernToggleButton}" Background="Transparent" Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,15,0" Click="ThemeToggle_Click"/>
                        <Button Content="退出登录" 
                              Style="{StaticResource ModernButton}"
                              Background="#F56C6C"
                              Click="LogoutButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 主内容区域 -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- 侧边栏 -->
                <Border Background="#F5F7FA" 
                        BorderBrush="#E4E7ED" 
                        BorderThickness="0,0,1,0">
                    <StackPanel Margin="0,20,0,0">
                        <Button Content="素材管理" 
                              Style="{StaticResource ModernButton}"
                              Background="Transparent"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Stretch"
                              Margin="10,5"
                              Click="MaterialsButton_Click"/>
                        
                        <Button Content="标签管理" 
                              Style="{StaticResource ModernButton}"
                              Background="Transparent"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Stretch"
                              Margin="10,5"
                              Click="TagsButton_Click"/>
                        
                        <Button Content="工作流管理" 
                              Style="{StaticResource ModernButton}"
                              Background="Transparent"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Stretch"
                              Margin="10,5"
                              Click="WorkflowsButton_Click"/>
                        
                        <Button x:Name="UsersButton" 
                              Content="用户管理" 
                              Style="{StaticResource ModernButton}"
                              Background="Transparent"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Stretch"
                              Margin="10,5"
                              Click="UsersButton_Click"
                              Visibility="Collapsed"/>
                        
                        <Button x:Name="InviteCodesButton" 
                              Content="邀请码管理" 
                              Style="{StaticResource ModernButton}"
                              Background="Transparent"
                              Foreground="{StaticResource TextPrimaryBrush}"
                              HorizontalAlignment="Stretch"
                              Margin="10,5"
                              Click="InviteCodesButton_Click"
                              Visibility="Collapsed"/>
                    </StackPanel>
                </Border>

                <!-- 内容区域 -->
                <Frame x:Name="MainFrame" 
                     Grid.Column="1" 
                     NavigationUIVisibility="Hidden"/>
            </Grid>
        </Grid>
    </Grid>
</Window>
