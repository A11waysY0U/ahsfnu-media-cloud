# AHSFNU Media Cloud API 测试脚本

## 概述

本项目提供了两个Python测试脚本来测试AHSFNU Media Cloud的API接口：

1. `test_api.py` - 完整的API测试脚本
2. `quick_test.py` - 快速测试脚本

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 快速测试

```bash
python quick_test.py
```

这个脚本会：
- 测试服务器连接
- 测试用户注册/登录
- 测试文件上传
- 测试素材更新

### 2. 完整测试

```bash
python test_api.py
```

这个脚本会进行更全面的测试，包括：
- 服务器健康检查
- 未授权访问测试
- 无效token测试
- 用户注册/登录
- 文件上传（多种类型）
- 素材更新
- 详细的响应信息输出

## API接口列表

### 认证接口

- `POST /api/v1/auth/register` - 用户注册
- `POST /api/v1/auth/login` - 用户登录

### 素材管理接口

- `POST /api/v1/materials` - 上传素材
- `PUT /api/v1/materials/:id` - 更新素材

## 测试前准备

1. 确保Go服务器正在运行
2. 确保数据库已正确配置
3. 确保有有效的邀请码（用于注册测试）

## 注意事项

1. **邀请码**：注册测试需要有效的邀请码，请根据实际情况修改脚本中的邀请码
2. **服务器地址**：默认测试地址为 `http://localhost:8080`，如需修改请编辑脚本中的 `base_url`
3. **文件上传**：测试脚本会创建临时文件进行上传测试，测试完成后会自动清理
4. **Token管理**：脚本会自动处理JWT token的获取和使用

## 故障排除

### 常见问题

1. **连接失败**
   - 检查服务器是否正在运行
   - 检查端口是否正确（默认8080）

2. **注册失败**
   - 检查邀请码是否有效
   - 检查用户名是否已存在

3. **上传失败**
   - 检查文件权限
   - 检查上传目录是否存在

4. **认证失败**
   - 检查JWT配置
   - 检查token格式

## 自定义测试

您可以根据需要修改测试脚本：

1. 修改测试数据（用户名、邮箱等）
2. 添加新的测试用例
3. 修改服务器地址
4. 添加更多的文件类型测试

## 输出示例

```
🚀 AHSFNU Media Cloud API 测试开始
============================================================

==================================================
测试: 服务器健康检查
状态码: 200
响应头: {'Content-Type': 'text/html; charset=utf-8', ...}
响应体: <!DOCTYPE html>...
==================================================

✅ 注册成功，用户ID: 1
✅ 上传成功，素材ID: 1
✅ 更新成功

🎉 API测试完成！
============================================================
``` 